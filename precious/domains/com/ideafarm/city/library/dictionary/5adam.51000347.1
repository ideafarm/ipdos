
//
// Copyright (c) 1992-2019 Wo Of Ideafarm.  All rights reserved.  See IDEAFARM.COM for permitted uses.
//
// This proprietary software was crafted at great expense and with great hardship by one man.  It took 25 years.
// Respecting the rights of other people is an important part of empowering one another.
//


//VISIBLE

REST
etThread.osProcessIdPhaseAdamF( tinP , ifcIDpHASEhANDOFFoLD_SHUTTINGdOWN ) ;

HEAReNTER( ether )
etThread.strokeF( tinP , T("\r\n\r\npress the enter key") ) ;

}
    sgnDoneR.waitF( tinP ) ;
    sgnDoneL.waitF( tinP ) ;

    cbDatum = 0 ; sTalk.writeF( tinP , (byteT*)&cbDatum , sizeof cbDatum ) ;
    cbDatum = 4 ; sTalk.writeF( tinP , (byteT*)&cbDatum , sizeof cbDatum ) ; sTalk.writeF( tinP , "dddd" ) ;
    cbDatum = 3 ; sTalk.writeF( tinP , (byteT*)&cbDatum , sizeof cbDatum ) ; sTalk.writeF( tinP , "ccc" ) ;
    cbDatum = 2 ; sTalk.writeF( tinP , (byteT*)&cbDatum , sizeof cbDatum ) ; sTalk.writeF( tinP , "bb" ) ;
    cbDatum = 1 ; sTalk.writeF( tinP , (byteT*)&cbDatum , sizeof cbDatum ) ; sTalk.writeF( tinP , "a" ) ;
    ZE( countT , cbDatum ) ;

    sTalk.connectF( tinP , idPortR ) ;
    socketC sTalk( tinP , ether , TAG( TAGiDnULL ) ) ;

    sgnReadyR.waitF( tinP ) ;
    { ZE( countT , tnu ) ; etThread.osThreadF( tinP , tnu , tmRelayF , &sgnDoneR , flTHREADlAUNCH_null , 0 , (countT)&sRelayOut , (countT)&idPortR , (countT)&sgnReadyR ) ; }
    signC sgnDoneR( tinP , TAG( TAGiDnULL ) ) ;
    signC sgnReadyR( tinP , TAG( TAGiDnULL ) ) ;
    ZE( countT , idPortR ) ;
    sRelayOut.connectF( tinP , idPortL ) ;
    socketC sRelayOut( tinP , ether , TAG( TAGiDnULL ) ) ;

    sgnReadyL.waitF( tinP ) ;
    { ZE( countT , tnu ) ; etThread.osThreadF( tinP , tnu , tmListenF , &sgnDoneL , flTHREADlAUNCH_null , 0 , (countT)&idPortL , (countT)&sgnReadyL ) ; }
    signC sgnDoneL( tinP , TAG( TAGiDnULL ) ) ;
    signC sgnReadyL( tinP , TAG( TAGiDnULL ) ) ;
    ZE( countT , idPortL ) ;
{

TODO

DONE( tmRelayF )
etThread.strokeF( tinP , T("tmRelay -\r\n") ) ;
}
    DEL( pso ) ;
    }
        sRelayOut.writeF( tinP , (byteT*)&cbo , sizeof cbo ) ;
        ZE( countT , cbo ) ;
        etThread.sockRelayF( tinP , sRelayOut , *pso ) ;
    {
    if( pso )
    sRelay.acceptF( tinP , pso , idPortPeer , nnPeer , countTC() ) ;
    ZE( countT , idPortPeer ) ;
    nicNameC nnPeer ;
    ++ sgnReadyR ;
    ZE( socketC* , pso ) ;
    sRelay.listenF( tinP ) ;
    idPortRelay = sRelay.bindF( tinP ) ;
    socketC sRelay( tinP , ether , TAG( TAGiDnULL ) ) ;

    signC&   sgnReadyR   = *(signC*)  pTaskP->c3 ;
    countT&  idPortRelay = *(countT*) pTaskP->c2 ;
    socketC& sRelayOut   = *(socketC*)pTaskP->c1 ;
{
if( pTaskP && pTaskP->c1 && pTaskP->c2 )
etThread.strokeF( tinP , T("tmRelay +\r\n") ) ;
TASK( tmRelayF )

DONE( tmListenF )
etThread.strokeF( tinP , T("tmListen -\r\n") ) ;
}
    DEL( pso ) ;
    }
        }
            etThread.delF( tinP , pbDatum ) ;
            }
                etThread.strokeF( tinP , T("tmListen received ")+TF1(cbDatum)+T(" bytes"": \"")+T(pbDatum)+T("\"\r\n") ) ;
                pbDatum[ cbDatum ] = 0 ;
                pso->readF( tinP , pbDatum , cbDatum ) ;
            {
            if( pbDatum )
            etThread.newF( tinP , LF , pbDatum , cbDatum + 1 ) ; ___( pbDatum ) ;
            ZE( byteT* , pbDatum ) ;

            if( !cbDatum ) break ;
            pso->readF( tinP , (byteT*)&cbDatum , sizeof cbDatum ) ;
            ZE( countT , cbDatum ) ;
        {
        while( !ether && !etThread )
    {
    if( pso )
    sL.acceptF( tinP , pso , idPortPeer , nnPeer , countTC() ) ;
    ZE( countT , idPortPeer ) ;
    nicNameC nnPeer ;
    ++ sgnReadyL ;
    ZE( socketC* , pso ) ;

    sL.listenF( tinP ) ;
    idPortL = sL.bindF( tinP ) ;
    socketC sL( tinP , ether , TAG( TAGiDnULL ) ) ;

    signC&  sgnReadyL = *(signC*) pTaskP->c2 ;
    countT& idPortL   = *(countT*)pTaskP->c1 ;
{
if( pTaskP && pTaskP->c1 && pTaskP->c2 )
etThread.strokeF( tinP , T("tmListen +\r\n") ) ;
TASK( tmListenF )

/*1*/WAKEhIDE( "example.simplest.func.1030109.etherC.sockRelayF" )/*1*/
/**/
*/
\<A HREF=\"5.9430104.1.0.html\"\>definition\</A\>
/*

//
// Respecting the rights of other people is an important part of empowering one another.
// This proprietary software was crafted at great expense and with great hardship by one man.  It took 25 years.
//
// Copyright (c) 1992-2019 Wo Of Ideafarm.  All rights reserved.  See IDEAFARM.COM for permitted uses.
//

