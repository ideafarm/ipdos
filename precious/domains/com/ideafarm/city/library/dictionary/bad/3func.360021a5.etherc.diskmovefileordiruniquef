
//
// Copyright (c) 1992-2020 Wo Of Ideafarm.  All rights reserved.  See IDEAFARM.COM for permitted uses.
//
// This proprietary software was crafted at great expense and with great hardship by one man.  It took 28 years.
// Respecting the rights of other people is an important part of empowering one another.
//


}
    diskMoveFileOrDirF( tinP , psttNewP , psttOldP , cTriesP ) ;

    }
        delF( tinP , psttShort ) ;
        delF( tinP , psttDir ) ;
        delF( tinP , psttu ) ;

        strFuseF( tinP , psttNewP , tNewShort ) ;
    
        if( !psttNewP ) { strMakeF( tinP , psttNewP , T(psttDir) , tNewShort.csF( tinP ) ) ; ___( psttNewP ) ; }

        tNewShort = T(psttShort)+T(".!.")+T(psttu) ;                //20180501@1309: CHANGED "." TO ".!." WITHOUT ANALYSIS TO FACILITATE PARSING; SHOULD NOT BREAK EXISTING CODE BECAUSE THE CHANGE PRECEDES THE UNIQUIFIER WHICH I THINK IS NEVER PARSED
        TN( tNewShort , "" ) ;

        if( bDir && psttShort->idAdam ) psttShort->idAdam -- ; // TRUNCATE AWAY THE TRAILING SLASH
        strBisectF( tinP , psttDir , psttShort , psttOldP , T("/") , - 1 - bDir , flSTRbISECT_APPENDdELIMITER ) ; ___( psttDir ) ; ___( psttShort ) ;
        ZE( strokeS* , psttShort ) ;
        ZE( strokeS* , psttDir ) ;
    
        strUniqueF( tinP , psttu ) ; ___( psttu ) ;
        ZE( strokeS* , psttu ) ;

        boolT bDir = psttOldP[ CSpREFIX - 1 + psttOldP->idAdam ].idAdam == '/' ;
    {

    _IO_

    }
        if( POOP ) return ;
        __Z( psttOldP ) ;
        if( POOP ) return ;
    {
    IFbEcAREFUL
    SCOOP
{
/**//*1*/voidT etherC::diskMoveFileOrDirUniqueF( tinS& tinP , strokeS*& psttNewP , const strokeS* const psttOldP , const countT cTriesP )/*1*/
*/
  if 0 then will retry forever
 cTriesP
   example: T("///ideafarm/ephemeral/tmpold/old")
  file name
 psttOldP
    this example -would- work, however, on Linux
    psttNewP: T("///d/new")
    psttOldP: T("///c" "/old")
   here is an example that would -not- work (on os/2 and on windows) because two devices (c : and d :) are involved
  must be on the same device as psttOldP
   example: T("///ideafarm/ephemeral/tmpnew/new")
  on return, will contain the new file name
  if not 0 then must point to the name of a directory and must have enough extra strokes to accomodate the file name plus a string returned by strUniqueF plus wo additional stroke
  normally is 0
 psttNewP
arguments
  \<A HREF=\"5.6210104.1.1.0.html\"\>6210104:  WAKEsHOW( "example.simplest.func.1030013.etherC.diskMoveFileOrDirF" )\</A\>
 simplest
examples
\<A HREF=\"5.1030013.1.0.html\"\>definition\</A\>
\<A HREF=\"6.$diskMoveFileOrDirF.0.html\"\>instances\</A\>
/*

//
// Respecting the rights of other people is an important part of empowering one another.
// This proprietary software was crafted at great expense and with great hardship by one man.  It took 28 years.
//
// Copyright (c) 1992-2020 Wo Of Ideafarm.  All rights reserved.  See IDEAFARM.COM for permitted uses.
//

