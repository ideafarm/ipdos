
//
// Copyright (c) 1992-2021 Wo Of Ideafarm.  All rights reserved.  See IDEAFARM.COM for permitted uses.
//
// This proprietary software was crafted at great expense and with great hardship by one man.  It took 29 years.
// Respecting the rights of other people is an important part of empowering one another.
//


}
    }
        }
            //CONoUTrAW( "helloToHandleIF: 0 end of loop snippet\r\n" ) ;
            handleUnregisterIF( tinP , idpthc ) ;
            //CONoUTrAW( "helloToHandleIF: 1 unregistering handle\r\n" ) ;
    
            if( bOk ) break ;
            //CONoUTrAW3( "helloToHandleIF: 2 bOk:" , bOk , "\r\n" ) ;

            }
                }
                    tinP.pEther->traceF( tinP , T("helloToHandleIF / could not say hello to handle [idpthc:nn,idPort]:    ")+T((nicNameC&)idpthc)+T("    ")+TF2((countT&)idpthc,flFORMAT_NObIGITvALUES|flFORMAT_UNSIGNED) ) ;
                    POOPRqUIET
                {
                if( POOP )

                }
                    DEL( psBagOk ) ;
                    DEL( psBag ) ;
                    }
                        else       bOk = 1 ;
                        if( POOP ) POOPR
                        TELL( "reading ok-" )
                        VERIFYrELAY2( sock , *psBagOk ) ;
                        TELL( "reading ok+ 5" )
                        //CONoUTrAW( "helloToHandleIF: 4 reading the ok bag\r\n" ) ;

                        sock.writeF( tinP , *psBag ) ; //ASSUME: SERVER WILL, IF ROOT, ADD ME TO ITS LIST

                        //CONoUTrAW( "helloToHandleIF: 5 writing the hello bag\r\n" ) ;
                        //tinP.pEther->traceF( tinP , T("writing hello bag") ) ;
            
                        idptP >> *psBag ;
                        idptP >> *psBag ;
                        hdrBagIF( tinP , *psBag , idptP , idSerialLathHeaderP , flRELAYpOP_DOWN , ifcIDtYPEbAG_CLIENTpOPuNgOSSIP ) ;
                        //CONoUTrAW( "helloToHandleIF: 6 making hello bag\r\n" ) ;
                    {
                    if( psBag && psBagOk )
                    soulC* psBagOk = new( 0 , tinP , LF ) soulC( tinP , TAG( TAGiDnULL ) ) ; ___( psBagOk ) ;
                    soulC* psBag = new( 0 , tinP , LF ) soulC( tinP , TAG( TAGiDnULL ) ) ; ___( psBag ) ;
                    //CONoUTrAW( "helloToHandleIF: 7 after connecting ok\r\n" ) ;
                {
                if( !POOP )
                //CONoUTrAW( "helloToHandleIF: 8 after calling connectF\r\n" ) ;
                sock.connectF( tinP , idpthc , (nicNameC&)idpthc ) ;
                //CONoUTrAW( "helloToHandleIF: 9 connecting\r\n" ) ;

                tinP.pcUtility[ 0 ] = (countT)&sock ; //U:: TO FIND A BUG
                socketC sock( tinP , *tinP.pEtScratch , TAG( TAGiDnULL )/*U:: , 0 , flSOCKETc_TOPsECRET*/ ) ;
                SCOOPS
            {
            ZE( boolT , bOk ) ;
    
            if( !idpthc ) break ;
    
            idPortTimeC idpthc = handleQueryIF( tinP ) ;
            //CONoUTrAW( "helloToHandleIF: a querying handle\r\n" ) ;
        {
        for(;;)
    {
    IFsCRATCH
{
/*1*/voidT relayC::helloToHandleIF( tinS& tinP , idPortTimeC& idptP , countT& idSerialLathHeaderP )/*1*/
/**/
*/
/*

//
// Respecting the rights of other people is an important part of empowering one another.
// This proprietary software was crafted at great expense and with great hardship by one man.  It took 29 years.
//
// Copyright (c) 1992-2021 Wo Of Ideafarm.  All rights reserved.  See IDEAFARM.COM for permitted uses.
//

