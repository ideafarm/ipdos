
//
// Copyright (c) 1992-2021 Wo Of Ideafarm.  All rights reserved.  See https://github.com/ideafarm/ipdos for permitted uses.
//
// This proprietary software was crafted at great expense and with great hardship by one man.  It took 29 years.
// Respecting the rights of other people is an important part of empowering one another.
//


REST
etThread.osProcessIdPhaseAdamF( tinP , ifcIDpHASEhANDOFFoLD_SHUTTINGdOWN ) ;

etThread.strokeF( tinP , T("ok\r\n") ) ;
onePackF( tinP , etThread ) ;

TODO

}
    }
        etThread.delF( tinP , pba ) ;
        }
            etThread.boxPutF( tinP , T("///ideafarm/ephemeral/domains/com/ideafarm/gen/lake/pack") , pba , cba ) ;
            etThread.strokeF( tinP , T("\r\nwriting combined pack\r\n") ) ;

            }
                etThread.delF( tinP , pc2p ) ;
                }
                    etThread.delF( tinP , pbPack ) ;
                    off += cbPack - sizeof( countT ) ;
                    etThread.memCopyF( tinP , pba + off , pbPack + sizeof( countT ) , cbPack - sizeof( countT ) ) ;
                    byteT* pbPack = (byteT*)pc2p->c2 ;
                    countT cbPack = pc2p->c1 ;
                {
                if( pc2p )
                stPacks >> pc2p ;
                ZE( count2S* , pc2p ) ;
                etThread.strokeF( tinP , T("\rcopying pack ")+TF1(++idPack)+T(" of ")+TF1(cToDo)+T(" to combined image") ) ;
            {
            while( stPacks )
            countT off = sizeof( countT ) ;

            *(countT*)pba = ifcIDfILEtYPE_PACKED ;
        {
        if( pba )
        etThread.newF( tinP , LF , pba , cba ) ; ___( pba ) ;
        ZE( byteT* , pba ) ;
        idPack = 0 ;

        while( handle ) ;
        }
            if( pc2p ) cba += pc2p->c1 - sizeof( countT ) ;
            count2S* pc2p = (count2S*)stPacks.downF( tinP , handle ) ;
        {
        do
        handleC handle( tinP , TAG( TAGiDnULL ) , ifcIDtYPEhANDLE_STACKwALK ) ;
        countT cba = sizeof( countT ) ;
    {
    if( stPacks )

    }
        etThread.delF( tinP , pstt1m ) ;
        etThread.strokeF( tinP , T("\r\n") ) ;
        }
            }
                }
                    stPacks << pc2p ;
                    pc2p->c2 = (countT)pbPack ;
                    pc2p->c1 = cbPack ;
                {
                if( pc2p )
                etThread.newF( tinP , LF , pc2p ) ; ___( pc2p ) ;
                ZE( count2S* , pc2p ) ;
            {
            if( !etThread )

            if( !etThread ) { __( *(countT*)pbPack - ifcIDfILEtYPE_PACKED ) ; }
            if( !etThread ) { __( cbPack < sizeof( countT )               ) ; }
            etThread.boxGetShadowF( tinP , pbPack , cbPack , psttc1 ) ; ___( pbPack ) ;
            ZE( countT , cbPack ) ;
            ZE( byteT* , pbPack ) ;

            etThread.strokeF( tinP , T("\rreading pack ")+TF1(++idPack)+T(" of ")+TF1(cToDo)+T(" from disk") ) ;
        {
        FORsTRINGSiN1( pstt1m )

        cToDo = etThread.boxMenuF( tinP , soul1m , T("///ideafarm/ephemeral/domains/com/ideafarm/gen/lake/packs/" "*") ) ; ___( pstt1m ) ;
        ZE( strokeS* , pstt1m ) ;
    {
    stackC stPacks( tinP , etThread , TAG( TAGiDnULL ) , flSTACKc_FIFO , ifcSTACKtYPE_PTR_count2S ) ;
    ZE( countT , cToDo ) ;
    ZE( countT , idPack ) ;
{
voidT onePackF( tinS& tinP , etherC& etThread )
// THIS CODE IS DUPLICATED IN 9e30104 AND IN dd30104

/*1*/WAKEhIDE( "onePack" )/*1*/
/**/
*/
/*

//
// Respecting the rights of other people is an important part of empowering one another.
// This proprietary software was crafted at great expense and with great hardship by one man.  It took 29 years.
//
// Copyright (c) 1992-2021 Wo Of Ideafarm.  All rights reserved.  See https://github.com/ideafarm/ipdos for permitted uses.
//

