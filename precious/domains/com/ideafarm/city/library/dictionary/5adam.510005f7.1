
//
// Copyright (c) 1992-2021 Wo Of Ideafarm.  All rights reserved.  See IDEAFARM.COM for permitted uses.
//
// This proprietary software was crafted at great expense and with great hardship by one man.  It took 29 years.
// Respecting the rights of other people is an important part of empowering one another.
//

                            
REST

}
    }
        ++ s ; ether.osSleepF( tinP , TUCK * 2 ) ;

        }
            bPrefix = !bPrefix ;

            }
                else          pbi = 0 ;
                if( bDelete ) PUSE( tinP , *(byteT**)&pbi ) ;

                }
                    cbi = sizeof( countT ) ;
                    //CONoUTrAW( "\r\n" ) ;
                    //for( countT offi = 0 ; offi < cbi ; offi ++ ) { CONoUTrAW3( " " , pbi[ offi ] , "" ) ; }
                    CONoUTrAW5( "\r                                 \rcycle " , idCycle , " received " , cbi , " bytes" ) ;
                    ++ idCycle ;
                {
                else
                if( bPrefix ) cbi = *(countT*)pbi ;
            {
            else
            }
                break ;
                hRead = hReadSave ;
                cbi = cbiSave ;
            {
            if( !pbi )
            boolT bDelete = books.readF( tinP , pbi , cbi , hRead ) ;
            handleC hReadSave = hRead ;
            countT cbiSave = cbi ;
        {
        while( !ether )
        sleepC s( tinP , TAG( TAGiDnULL ) ) ;
    {
    while( !ether )
    ZE( countT , idCycle ) ;
    boolT bPrefix = 1 ;
    countT cbi = sizeof( countT ) ;
    ZE( const byteT* , pbi ) ;

    handleC hRead( tinP , TAG( TAGiDnULL ) , ifcIDtYPEhANDLE_BOOKS ) ;

    booksC books( tinP , TAG( TAGiDnULL ) , "varying.size" , ifcIDsTATEsPACE_SINGLEaDAM( tinP ) ) ;
{

etThread.osThreadF( TaRG1( tmWriteF ) ) ;

TODO

DONE( tmWriteF )
}
    }
        ++ s ; ether.osSleepF( tinP , TUCK ) ;

        tinP.pc Utility[ 0 ] -- ;
        books.writeF( tinP , pbTuck       , cbo        , 0 , 0 , flBOOKScwRITE_ALLOWoDDlENGTH ) ;
        books.writeF( tinP , (byteT*)&cbo , sizeof cbo , 0 , 0 , flBOOKScwRITE_ALLOWoDDlENGTH ) ;
        tinP.pc Utility[ 0 ] ++ ;
        countT cbo = 1 + idCycle % sizeof pbTuck ;

        ++ idCycle ;
    {
    while( !ether )
    ZE( countT , idCycle ) ;
    sleepC s( tinP , TAG( TAGiDnULL ) ) ;
    
    booksC books( tinP , TAG( TAGiDnULL ) , "varying.size" , ifcIDsTATEsPACE_SINGLEaDAM( tinP ) , flBOOKSc_WRITER | flBOOKSc_PURGEoNcT , 1 + ( TUCK << 1 ) ) ;

    for( countT offo = 0 ; offo < sizeof pbTuck ; offo ++ ) pbTuck[ offo ] = (byteT)offo ;
    byteT pbTuck[ TUCK ] ;
{
if( pTaskP )
TASK( tmWriteF )

/*1*/WAKEsHOWtEXT( "example.other.snip.0030176.booksC.length.prefixed.data.eater" )/*1*/
/**/
*/
/*

//
// Respecting the rights of other people is an important part of empowering one another.
// This proprietary software was crafted at great expense and with great hardship by one man.  It took 29 years.
//
// Copyright (c) 1992-2021 Wo Of Ideafarm.  All rights reserved.  See IDEAFARM.COM for permitted uses.
//

